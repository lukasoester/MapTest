<!DOCTYPE html>
<html>

	<head>
		<script src="https://d3js.org/d3.v4.min.js"></script>
		<script src="https://unpkg.com/d3-sankey@0.6"></script>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"> </script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="src/sankey.js"></script>
		<script src="src/readJSON.js"></script>
		<script src="src/calculateLinks.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="src/style.css">
		<title>Ausbildungs- und Erwerbsverläufe</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="icon" href="icon.png">
	</head>

	<body>
		</br>
		<div class="container-fluid">
			<div class="panel panel-default2">
				<div class="panel-body">
					<h1 id="headline">Ausbildungs- und Erwerbsverläufe des Forschungsprojekts TREE (Institut für Soziologie der Universität Bern)</h1>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<div class="col-sm-2">
				<div class="col-sm-15">
					<div class="panel panel-default">
						<div class="panel-body">
							<div id="Radios" >
								<form id = "filterForm" onchange="updateSankey()">
								<div id="radioButtons" >
									<p class="headline2">Geschlecht:</p>
									<input type="radio" name="selection" value="female" id="rb1"></input>
									<label for="rb1">Frauen</label>
									</br>
									<input type="radio" name="selection" value="male" id="rb2"></input>
									<label for="rb2">Männer</label>
									</br>
									<p class="headline2">Sprachregion:</p>
									<input type="radio" name="selection" value="german" id="rb3"></input>
									<label for="rb3">DE</label>
									</br>
									<input type="radio" name="selection" value="latin" id="rb4"></input>
									<label for="rb4">FR/IT</label>
									</br>
									</br>
									<input type="radio" name="selection" value="all" id="rb5" checked></input>
									<label for="rb5">Alle</label>
									</br>
								</div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-15">
					<div class="panel panel-default">
						<div class="panel-body">			
							<div class="dropdown">
								<p class="headline2">Legende</p></br>
								<div id="legend">
									<p>
										<li><b>EOS</b> = letztes Schuljahr der obligatorischen Schulzeit</li>
										<li><b>NIA</b> = Nicht in Ausbildung</li>
										<li><b>ZL</b> = Zwischenlösung</li>
										<li><b>Sek II BB</b> = Sekundarstufe II Berufsbildung</li>
										<li><b>Sek II AB</b> = Sekundarstufe II Allgemeinbildung</li>
										<li><b>EMA</b> = Erwerbstätig mit Sek. II-Abschluss</li>
										<li><b>EOA</b> = Erwerbstätig ohne Abschluss</li>
										<li><b>Neet</b> = Weder in Ausbildung noch erwerbstätig</li>
										<li><b>Tertiär A</b> = Universität oder Fachhochschule</li>
										<li><b>Tertiär B</b> = Höhere Fachschulen, Fach- und Berufsprüfungen</li>
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-sm-10">
				<div class="panel panel-default">
					<div class="panel-body">
						<svg width="1300" height="830" id="diagram"></svg>
					</div>
				</div>
			</div>
		</div>
		
		<div class="container-fluid">
			<div class="panel panel-default">
			
				<h2>
					Ausbildungs- und Erwerbsverläufe des Forschungsprojekts TREE
				</h2>
				<p class="text">
					Die App visualisiert die Ausbildungs- und Erwerbsverläufe einer repräsentativen Stichprobe von Jugendlichen
					nach dem Ende der obligatorischen Schulzeit. Die Daten wurden zwischen 2000 und 2014 in der ganzen Schweiz erhoben.
					Die App zeigt, welcher Anteil der Stichprobe sich zu welchem Zeitpunkt in welchem Ausbildungs- oder Erwerbsstatus 
					befindet, wie sich die Übergänge von Jahr zu Jahr gestalten, und wie sich die Verteilung prozentual von Jahr zu Jahr verändert.				
				</p>
				
				<h2>
					Anleitung
				</h2>
				<p class="text">
					Mit der App kann man die Verläufe entweder für die gesamte Stichprobe („<span style="color:#04b404;"><b>Alle</b></span>“-Button) 
					darstellen oder aber für bestimmte Gruppen, z.B. nach Geschlecht oder Sprachregion filtern. 
					Mehrfachfilterungen (z.B. Deutschschweizer Männer) sind aus Gründen der Stichprobengrösse nicht möglich.
				</p>
			</div>
		</div>
		
		<footer class="container-fluid" id="footer">
			<div class="box">
				<ul class="list">
					<li>
						<h3>Rohdaten:</h3>
						<ul class="list">
							<li><a href="source/t1-t9baumforstudents_random_ID.json" target="_blank">json</a> </li>
							<li><a href="source/t1-t9baumforstudents_random_ID.csv" target="_blank">csv</a> </li>
							<li><a href="source/t1-t9baumforstudents_random_ID.xlsx" target="_blank">xlsx</a> </li>
							<li><a href="source/t1-t9baumforstudentslabels.xlsx" target="_blank">Labels</a></li>
						</ul>
					</li>
				</ul>
			</div>

			<div class="box">
				<h3>Erstellt von:</h3>
				<dl>
					<dt>Elias Wipfli</dt>
					<dd>elias.wipfli@students.unibe.ch</dd>
					<dt>Pascal Gerig</dt>
					<dd>pascal.gerig@students.unibe.ch</dd>
				</dl>
			</div>

			<div class="box" id="right">
				<h3>TREE </h3>
				<h4>(Transitionen von der Erstausbildung ins Erwerbsleben)</h4>
				<dl>
					<dd>Universität Bern</dd>
					<dd>Institut für Soziologie</dd>
					<dd><a href="http://www.tree.unibe.ch/" target="_blank">www.tree.unibe.ch</a></dd>
				</dl>
			</div>

			<div class="licence">
				<h3>Veröffentlich unter der GNU General Public License v3</h3>
			</div>
		</footer>

		<script>
			var jsonData = [];
			var jsonDataFiltered = [];
			var customLinks = [];
			var svg;
			var t;
			var formatNumber;
			var sankey;
			var linkGroup;
			var nodeGroup;
			var t1weigth = 0;
			var t2weigth = 0;
			var t3weigth = 0;
			var t4weigth = 0;
			var t5weigth = 0;
			var t6weigth = 0;
			var t7weigth = 0;
			var t8weigth = 0;
			var t9weigth = 0;

			//linkSize[i][j] will contain the width of the link from node i to node j
			var linkSize = new Array(56);
			var i;
			var j;
			for (i = 0; i < 56; i++) {
				linkSize[i] = new Array(62);
			}

			//set every element of Array to 0
			for (i = 0; i < 56; i++) {
				for (j = 0; j < 62; j++) {
					linkSize[i][j] = 0;
				}
			}

			initSankey();

			readData(updateSankey);
		</script>
	</body>

</html>